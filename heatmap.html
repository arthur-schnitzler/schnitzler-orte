<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.knightlab.com/libs/storymapjs/latest/css/storymap.css">
    <link rel="stylesheet" href="./static/css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <script type="text/javascript" src="https://cdn.knightlab.com/libs/storymapjs/latest/js/storymap-min.js"></script>
    <script type="text/javascript" src="./static/js/utils.js"></script>
    
    <style>
     
      #map { height: 800px; }
      .leaflet-container {
        background: rgba(0,0,0,.8) !important;
      }
    </style>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="static/js/heatmap.js"></script>
    <script src="static/js/leaflet-heatmap.js"></script>

    <title> Schnitzlers Aufenthalte als Heatmap </title>
    </head>

    <body>
    <div class="wrapper-fluid wrapper-navbar sticky-navbar" id="wrapper-navbar" itemscope="" itemtype="http://schema.org/WebSite">
            <nav class="navbar navbar-expand-lg navbar-light">
                <div class="container-fluid">
                    <!-- Your site title as branding in the menu -->
                    <a href="index.html" class="navbar-brand custom-logo-link" rel="home" itemprop="url">
                        <img src="https://shared.acdh.oeaw.ac.at//schnitzler-orte/schnitzler-orte.jpg" class="img-fluid" alt="Schnitzler Tagebuch" itemprop="logo"/>
                    </a><!-- end custom logo -->
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"/>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavDropdown">
                        <!-- Your menu goes here -->
                        <ul id="main-menu" class="navbar-nav">
               <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                     aria-expanded="false"> Links </a>
                  <ul class="dropdown-menu">
                     <li>
                        <a class="dropdown-item"
                           href="https://github.com/arthur-schnitzler/schnitzler-orte/tree/main/editions"
                           >Datei bei gitHub</a>
                     </li>
                     <li>
                        <a class="dropdown-item" href="https://schnitzler.acdh.oeaw.ac.at">Schnitzler
                           am ACDH-CH</a>
                     </li>
                     <li>
                        <a class="dropdown-item" href="https://schnitzler-tagebuch.acdh.oeaw.ac.at"
                           >Tagebuch</a>
                     </li>
                     <li>
                        <a class="dropdown-item" href="https://schnitzler-briefe.acdh.oeaw.ac.at"
                           >Briefe</a>
                     </li>
                  </ul>
               </li>
               <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                     aria-expanded="false"> Visualisierungen </a>
                  <ul class="dropdown-menu">
                     <li>
                        <a class="dropdown-item" href="flourish.html">Animierte Reiseabfolge</a>
                     </li>
                     <li>
                        <a class="dropdown-item" href="itineraries.html">Ziele nach Jahren</a>
                     </li>
                    <li>
                        <a class="dropdown-item" href="bubblemap.html">Aufenthaltsdauer</a>
                     </li>
                     <li>
                        <a class="dropdown-item" href="arcs.html">Beziehungen zwischen Orten</a>
                     </li>
                       <li>
                        <a class="dropdown-item" href="towers.html">Quantitativ auf einer Karte</a>
                     </li>
                     <!--<li>
                        <a class="dropdown-item" href="travel-net.html">Netzwerk</a>
                     </li>-->
                     <li>
                        <a class="dropdown-item" href="travel-net-map.html">Netzwerk auf
                           Karte</a>
                     </li>
                    <!-- <li>
                        <a class="dropdown-item" href="travels.html">Tabelle</a>
                     </li> -->
                  </ul>
               </li>
            </ul>

                       
                    </div>
                    <!-- .collapse navbar-collapse -->
                </div>
                <!-- .container -->
            </nav>
            <!-- .site-navigation -->
        </div>



   
    
  <body>
   
   <div id="map"></div>
    <script>
      window.onload = function() {

        async function drawMap() {
            let obj;
            const res = await fetch('data/heatmap.json')
            obj = await res.json();
            var testData = {
                max: 8000,
                data: obj
              };
              var baseLayer = L.tileLayer(
                'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
                  attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
                  maxZoom: 18
                }
              );

              var cfg = {
                // radius should be small ONLY if scaleRadius is true (or small radius is intended)
                "radius": .5,
                "maxOpacity": .8, 
                // scales the radius based on map zoom
                "scaleRadius": true, 
                // if set to false the heatmap uses the global maximum for colorization
                // if activated: uses the data maximum within the current map boundaries 
                //   (there will always be a red spot with useLocalExtremas true)
                "useLocalExtrema": true,
                // which field name in your data represents the latitude - default "lat"
                latField: 'lat',
                // which field name in your data represents the longitude - default "lng"
                lngField: 'lng',
                // which field name in your data represents the data value - default "value"
                valueField: 'count'
              };

              var heatmapLayer = new HeatmapOverlay(cfg);

              var map = new L.Map('map', {
                center: new L.LatLng(48.00, 16.00),
                zoom: 6,
                layers: [baseLayer, heatmapLayer]
              });
      
              heatmapLayer.setData(testData);
          }
          drawMap()
      };
    </script>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <div class="container">
<div class="wrapper fundament-default-footer" id="wrapper-footer-full" style="margin-top: 4em;">
            <div class="container" id="footer-full-content" tabindex="-1">
                <div class="footer-separator">
                    KONTAKT
                </div>
                <div class="row">
                    <div class="footer-widget col-lg-1 col-md-2 col-sm-2 col-xs-6  ml-auto  text-center ">
                        <div class="textwidget custom-html-widget">
                            <a href="/"><img src="https://fundament.acdh.oeaw.ac.at/common-assets/images/acdh_logo.svg" class="image" alt="ACDH Logo" style="max-width: 100%; height: auto;" title="ACDH Logo"/></a>
                        </div>
                    </div>
                    <!-- .footer-widget -->
                    <div class="footer-widget col-lg-4 col-md-3 col-sm-3">
                        <div class="textwidget custom-html-widget">
                            <p>
                                ACDH-CH ÖAW
                                <br/>
                                Austrian Centre for Digital Humanities and Cultural Heritage
                                <br/>
                                Österreichische Akademie der Wissenschaften
                            </p>
                            <p>
                                Bäckerstraße 13
                                <br/>
                                1010 Wien
                            </p>
                            <p>
                                T: +43 1 51581-2200
                                <br/>
                                E: <a href="mailto:acdh@oeaw.ac.at">acdh@oeaw.ac.at</a>
                            </p>
                        </div>
                    </div>
                    <!-- .footer-widget -->                       
                    <div class="footer-widget col-lg-3 col-md-4 col-sm-3 ml-auto">
                        <div class="row">
                            <div class="textwidget custom-html-widget">
                                <h6 class="font-weight-bold">HELPDESK</h6>
                                <p>ACDH-CH betreibt einen Helpdesk mit Rat und Hilfestellung zu verschiedensten Fragen der Digital Humanities.</p>
                                <p>
                                    <a class="helpdesk-button" href="mailto:acdh-helpdesk@oeaw.ac.at">FRAG UNS!</a>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="footer-widget col-lg-3 col-md-4 col-sm-3 ml-auto" style="margin-left:0 !important;">
                                <div class="textwidget custom-html-widget">
                                    <p style="margin-bottom:0 !important;">Social: </p>                                    
                                </div>
                                <div class="row">                              
                                    <div class="textwidget custom-html-widget col-md-4">                                    
                                        <a id="github-logo" title="GitHub" href="https://github.com/arthur-schnitzler/schnitzler-orte" class="nav-link" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-4.466 19.59c-.405.078-.534-.171-.534-.384v-2.195c0-.747-.262-1.233-.55-1.481 1.782-.198 3.654-.875 3.654-3.947 0-.874-.312-1.588-.823-2.147.082-.202.356-1.016-.079-2.117 0 0-.671-.215-2.198.82-.64-.18-1.324-.267-2.004-.271-.68.003-1.364.091-2.003.269-1.528-1.035-2.2-.82-2.2-.82-.434 1.102-.16 1.915-.077 2.118-.512.56-.824 1.273-.824 2.147 0 3.064 1.867 3.751 3.645 3.954-.229.2-.436.552-.508 1.07-.457.204-1.614.557-2.328-.666 0 0-.423-.768-1.227-.825 0 0-.78-.01-.055.487 0 0 .525.246.889 1.17 0 0 .463 1.428 2.688.944v1.489c0 .211-.129.459-.528.385-3.18-1.057-5.472-4.056-5.472-7.59 0-4.419 3.582-8 8-8s8 3.581 8 8c0 3.533-2.289 6.531-5.466 7.59z"/></svg>                                
                                        </a>
                                    </div>                                                                        
                                </div>                                
                            </div>
                        </div>
                    </div>
                    <!-- .footer-widget -->
                </div>
            </div>
        </div>
        <!-- #wrapper-footer-full -->
        <div class="footer-imprint-bar" id="wrapper-footer-secondary" style="text-align:center; padding:0.4rem 0; font-size: 0.9rem;" >
            <a href="https://www.oeaw.ac.at/oeaw/impressum">Impressum</a>
        </div>
</div>
    
    
  </body>

</html>